{"ast":null,"code":"import React,{useState}from'react';import{useNavigate,Link}from'react-router-dom';import api from'../../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NovoAdmin=()=>{const navigate=useNavigate();const[form,setForm]=useState({nome:'',email:'',senha:'',nivelAcesso:''});const[erros,setErros]=useState({});const handleChange=e=>{setForm({...form,[e.target.name]:e.target.value});setErros({...erros,[e.target.name]:''});// Limpa erro ao digitar\n};const validarCampos=()=>{const novosErros={};if(!form.nome)novosErros.nome='Nome é obrigatório.';if(!form.email)novosErros.email='Email é obrigatório.';if(!form.senha)novosErros.senha='Senha é obrigatória.';if(!form.nivelAcesso)novosErros.nivelAcesso='Nível de Acesso é obrigatório.';return novosErros;};const handleSubmit=async e=>{e.preventDefault();const validacao=validarCampos();if(Object.keys(validacao).length>0){setErros(validacao);return;}try{await api.post('/admins',form);navigate('/admins');}catch(error){var _error$response;const resp=(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data;if(resp!==null&&resp!==void 0&&resp.erros){const fieldErrors=resp.erros.reduce((acc,cur)=>({...acc,[cur.path]:cur.msg}),{});setErros(fieldErrors);}else{alert((resp===null||resp===void 0?void 0:resp.erro)||'Erro ao cadastrar admin.');}}};return/*#__PURE__*/_jsx(\"div\",{className:\"container my-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border rounded shadow-sm bg-white\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mb-0\",children:\"Cadastrar Novo Admin\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/home\",className:\"btn btn-secondary me-2\",children:\"Voltar ao In\\xEDcio\"}),/*#__PURE__*/_jsx(Link,{to:\"/admins\",className:\"btn btn-dark\",children:\"Ver Admins\"})]})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nome\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"nome\",className:\"form-control\",value:form.nome,onChange:handleChange}),erros.nome&&/*#__PURE__*/_jsx(\"div\",{className:\"text-danger\",children:erros.nome})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",className:\"form-control\",value:form.email,onChange:handleChange}),erros.email&&/*#__PURE__*/_jsx(\"div\",{className:\"text-danger\",children:erros.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Senha\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"senha\",className:\"form-control\",value:form.senha,onChange:handleChange}),erros.senha&&/*#__PURE__*/_jsx(\"div\",{className:\"text-danger\",children:erros.senha})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"N\\xEDvel de Acesso\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"nivelAcesso\",className:\"form-select\",value:form.nivelAcesso,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecione...\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Admin\"}),/*#__PURE__*/_jsx(\"option\",{value:\"colaborador\",children:\"Colaborador\"}),/*#__PURE__*/_jsx(\"option\",{value:\"super\",children:\"Super\"})]}),erros.nivelAcesso&&/*#__PURE__*/_jsx(\"div\",{className:\"text-danger\",children:erros.nivelAcesso})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success\",children:\"Cadastrar\"})})]})]})});};export default NovoAdmin;","map":{"version":3,"names":["React","useState","useNavigate","Link","api","jsx","_jsx","jsxs","_jsxs","NovoAdmin","navigate","form","setForm","nome","email","senha","nivelAcesso","erros","setErros","handleChange","e","target","name","value","validarCampos","novosErros","handleSubmit","preventDefault","validacao","Object","keys","length","post","error","_error$response","resp","response","data","fieldErrors","reduce","acc","cur","path","msg","alert","erro","className","children","to","onSubmit","type","onChange"],"sources":["C:/Users/Ariel/PF2 - Walky-Loving-Dogs/frontend/src/pages/Admin/NovoAdmin.jsx"],"sourcesContent":["\r\nimport React, { useState } from 'react';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport api from '../../services/api';\r\n\r\nconst NovoAdmin = () => {\r\n  const navigate = useNavigate();\r\n  const [form, setForm] = useState({\r\n    nome: '',\r\n    email: '',\r\n    senha: '',\r\n    nivelAcesso: '',\r\n  });\r\n\r\n  const [erros, setErros] = useState({});\r\n\r\n  const handleChange = (e) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n    setErros({ ...erros, [e.target.name]: '' }); // Limpa erro ao digitar\r\n  };\r\n\r\n  const validarCampos = () => {\r\n    const novosErros = {};\r\n    if (!form.nome) novosErros.nome = 'Nome é obrigatório.';\r\n    if (!form.email) novosErros.email = 'Email é obrigatório.';\r\n    if (!form.senha) novosErros.senha = 'Senha é obrigatória.';\r\n    if (!form.nivelAcesso) novosErros.nivelAcesso = 'Nível de Acesso é obrigatório.';\r\n    return novosErros;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const validacao = validarCampos();\r\n    if (Object.keys(validacao).length > 0) {\r\n      setErros(validacao);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await api.post('/admins', form);\r\n      navigate('/admins');\r\n    } catch (error) {\r\n      const resp = error.response?.data;\r\n      if (resp?.erros) {\r\n        const fieldErrors = resp.erros.reduce(\r\n          (acc, cur) => ({ ...acc, [cur.path]: cur.msg }), {}\r\n        );\r\n        setErros(fieldErrors);\r\n      } else {\r\n        alert(resp?.erro || 'Erro ao cadastrar admin.');\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container my-5\">\r\n      <div className=\"p-4 border rounded shadow-sm bg-white\">\r\n        <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n          <h3 className=\"mb-0\">Cadastrar Novo Admin</h3>\r\n          <div>\r\n            <Link to=\"/home\" className=\"btn btn-secondary me-2\">Voltar ao Início</Link>\r\n            <Link to=\"/admins\" className=\"btn btn-dark\">Ver Admins</Link>\r\n          </div>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"mb-3\">\r\n            <label>Nome</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"nome\"\r\n              className=\"form-control\"\r\n              value={form.nome}\r\n              onChange={handleChange}\r\n            />\r\n            {erros.nome && <div className=\"text-danger\">{erros.nome}</div>}\r\n          </div>\r\n\r\n          <div className=\"mb-3\">\r\n            <label>Email</label>\r\n            <input\r\n              type=\"email\"\r\n              name=\"email\"\r\n              className=\"form-control\"\r\n              value={form.email}\r\n              onChange={handleChange}\r\n            />\r\n            {erros.email && <div className=\"text-danger\">{erros.email}</div>}\r\n          </div>\r\n\r\n          <div className=\"mb-3\">\r\n            <label>Senha</label>\r\n            <input\r\n              type=\"password\"\r\n              name=\"senha\"\r\n              className=\"form-control\"\r\n              value={form.senha}\r\n              onChange={handleChange}\r\n            />\r\n            {erros.senha && <div className=\"text-danger\">{erros.senha}</div>}\r\n          </div>\r\n\r\n          <div className=\"mb-3\">\r\n            <label>Nível de Acesso</label>\r\n            <select\r\n              name=\"nivelAcesso\"\r\n              className=\"form-select\"\r\n              value={form.nivelAcesso}\r\n              onChange={handleChange}\r\n            >\r\n              <option value=\"\">Selecione...</option>\r\n              <option value=\"admin\">Admin</option>\r\n              <option value=\"colaborador\">Colaborador</option>\r\n              <option value=\"super\">Super</option>\r\n            </select>\r\n            {erros.nivelAcesso && <div className=\"text-danger\">{erros.nivelAcesso}</div>}\r\n          </div>\r\n\r\n          <div>\r\n            <button type=\"submit\" className=\"btn btn-success\">Cadastrar</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NovoAdmin;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}