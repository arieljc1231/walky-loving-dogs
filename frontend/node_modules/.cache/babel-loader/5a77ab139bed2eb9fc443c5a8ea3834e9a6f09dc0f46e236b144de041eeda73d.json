{"ast":null,"code":"// src/pages/Evento/NovoEventoCliente.jsx\nimport React,{useState,useEffect}from'react';import{useNavigate,useParams}from'react-router-dom';import api from'../../services/api';import{Button,Form,Alert}from'react-bootstrap';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function NovoEventoCliente(){const navigate=useNavigate();const{petId}=useParams();const[pet,setPet]=useState(null);const[tipo,setTipo]=useState('Hospedagem');const[dataEntrada,setDataEntrada]=useState(new Date().toISOString().slice(0,16));const[observacoes,setObservacoes]=useState('');const[erro,setErro]=useState('');useEffect(()=>{api.get('/pets/'+petId).then(_ref=>{let{data}=_ref;return setPet(data);}).catch(()=>alert('Erro ao carregar pet'));},[petId]);const handleSubmit=async e=>{e.preventDefault();setErro('');try{var _pet$dono;const tutor=JSON.parse(localStorage.getItem('usuario_tutor'));await api.post('/eventos',{tipo,dataEntrada,observacoes,pet:petId,tutor:tutor._id,dono:(pet===null||pet===void 0?void 0:(_pet$dono=pet.dono)===null||_pet$dono===void 0?void 0:_pet$dono._id)||(pet===null||pet===void 0?void 0:pet.dono),// üõ†Ô∏è Corre√ß√£o aqui\nstatus:'Ativo',admin:null});navigate('/tutor/home');}catch(err){console.error(err);setErro('Erro ao salvar.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"mb-4\",children:[\"Cadastrar Evento (Cliente) para \",/*#__PURE__*/_jsx(\"strong\",{children:pet===null||pet===void 0?void 0:pet.nome})]}),erro&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:erro}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,className:\"border p-4 rounded shadow-sm\",children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Tipo de Evento\"}),/*#__PURE__*/_jsxs(Form.Select,{value:tipo,onChange:e=>setTipo(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{children:\"Hospedagem\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Passeio\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Banho\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Consulta\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Alimentacao\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Recreacao\"})]})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Data de Entrada\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"datetime-local\",value:dataEntrada,onChange:e=>setDataEntrada(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Observa\\xE7\\xF5es\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",rows:3,value:observacoes,onChange:e=>setObservacoes(e.target.value),placeholder:\"Observa\\xE7\\xF5es sobre o evento\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2\",children:[/*#__PURE__*/_jsx(Button,{variant:\"success\",type:\"submit\",children:\"Salvar\"}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>navigate(-1),children:\"Voltar\"})]})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useParams","api","Button","Form","Alert","jsx","_jsx","jsxs","_jsxs","NovoEventoCliente","navigate","petId","pet","setPet","tipo","setTipo","dataEntrada","setDataEntrada","Date","toISOString","slice","observacoes","setObservacoes","erro","setErro","get","then","_ref","data","catch","alert","handleSubmit","e","preventDefault","_pet$dono","tutor","JSON","parse","localStorage","getItem","post","_id","dono","status","admin","err","console","error","className","children","nome","variant","onSubmit","Group","Label","Select","value","onChange","target","Control","type","as","rows","placeholder","onClick"],"sources":["C:/Users/Ariel/PF2 - Walky-Loving-Dogs/frontend/src/pages/Evento/NovoEventoCliente.jsx"],"sourcesContent":["// src/pages/Evento/NovoEventoCliente.jsx\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport api from '../../services/api';\r\nimport { Button, Form, Alert } from 'react-bootstrap';\r\n\r\nexport default function NovoEventoCliente() {\r\n  const navigate = useNavigate();\r\n  const { petId } = useParams();\r\n\r\n  const [pet, setPet] = useState(null);\r\n  const [tipo, setTipo] = useState('Hospedagem');\r\n  const [dataEntrada, setDataEntrada] = useState(new Date().toISOString().slice(0, 16));\r\n  const [observacoes, setObservacoes] = useState('');\r\n  const [erro, setErro] = useState('');\r\n\r\n  useEffect(() => {\r\n    api.get('/pets/' + petId)\r\n      .then(({ data }) => setPet(data))\r\n      .catch(() => alert('Erro ao carregar pet'));\r\n  }, [petId]);\r\n\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    setErro('');\r\n\r\n    try {\r\n      const tutor = JSON.parse(localStorage.getItem('usuario_tutor'));\r\n\r\n      await api.post('/eventos', {\r\n        tipo,\r\n        dataEntrada,\r\n        observacoes,\r\n        pet: petId,\r\n        tutor: tutor._id,\r\n        dono: pet?.dono?._id || pet?.dono, // üõ†Ô∏è Corre√ß√£o aqui\r\n        status: 'Ativo',\r\n        admin: null\r\n      });\r\n\r\n      navigate('/tutor/home');\r\n    } catch (err) {\r\n      console.error(err);\r\n      setErro('Erro ao salvar.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-4\">\r\n      <h3 className=\"mb-4\">Cadastrar Evento (Cliente) para <strong>{pet?.nome}</strong></h3>\r\n\r\n      {erro && <Alert variant=\"danger\">{erro}</Alert>}\r\n\r\n      <Form onSubmit={handleSubmit} className=\"border p-4 rounded shadow-sm\">\r\n        <Form.Group className=\"mb-3\">\r\n          <Form.Label>Tipo de Evento</Form.Label>\r\n          <Form.Select value={tipo} onChange={e => setTipo(e.target.value)}>\r\n            <option>Hospedagem</option>\r\n            <option>Passeio</option>\r\n            <option>Banho</option>\r\n            <option>Consulta</option>\r\n            <option>Alimentacao</option>\r\n            <option>Recreacao</option>\r\n          </Form.Select>\r\n        </Form.Group>\r\n\r\n        <Form.Group className=\"mb-3\">\r\n          <Form.Label>Data de Entrada</Form.Label>\r\n          <Form.Control\r\n            type=\"datetime-local\"\r\n            value={dataEntrada}\r\n            onChange={e => setDataEntrada(e.target.value)}\r\n          />\r\n        </Form.Group>\r\n\r\n        <Form.Group className=\"mb-4\">\r\n          <Form.Label>Observa√ß√µes</Form.Label>\r\n          <Form.Control\r\n            as=\"textarea\"\r\n            rows={3}\r\n            value={observacoes}\r\n            onChange={e => setObservacoes(e.target.value)}\r\n            placeholder=\"Observa√ß√µes sobre o evento\"\r\n          />\r\n        </Form.Group>\r\n\r\n        <div className=\"d-flex gap-2\">\r\n          <Button variant=\"success\" type=\"submit\">Salvar</Button>\r\n          <Button variant=\"secondary\" onClick={() => navigate(-1)}>Voltar</Button>\r\n        </div>\r\n      </Form>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}